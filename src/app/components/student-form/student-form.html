<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-7">
            <div class="mb-3">
                <a routerLink="/dashboard"
                    class="text-decoration-none text-muted small d-inline-flex align-items-center">
                    <span class="me-1">‚Üê</span> Back to dashboard
                </a>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2 class="h5 mb-0">{{ isEditMode ? 'Edit Student' : 'New Student' }}</h2>
                </div>
                <div class="card-body p-4">
                    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
                        <div class="row g-3 mb-3">
                            <div class="col-md-6">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" id="firstName" formControlName="firstName" class="form-control"
                                    [class.is-invalid]="submitted && f['firstName'].errors" placeholder="John" />
                                @if (submitted && f['firstName'].errors) {
                                <div class="invalid-feedback d-block small">
                                    @if (f['firstName'].errors['required']) {
                                    <span>Required</span>
                                    }
                                    @if (f['firstName'].errors['minlength']) {
                                    <span>Min 2 characters</span>
                                    }
                                </div>
                                }
                            </div>

                            <div class="col-md-6">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" id="lastName" formControlName="lastName" class="form-control"
                                    [class.is-invalid]="submitted && f['lastName'].errors" placeholder="Doe" />
                                @if (submitted && f['lastName'].errors) {
                                <div class="invalid-feedback d-block small">
                                    @if (f['lastName'].errors['required']) {
                                    <span>Required</span>
                                    }
                                    @if (f['lastName'].errors['minlength']) {
                                    <span>Min 2 characters</span>
                                    }
                                </div>
                                }
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" formControlName="email" class="form-control"
                                [class.is-invalid]="submitted && f['email'].errors"
                                placeholder="john.doe@example.com" />
                            @if (submitted && f['email'].errors) {
                            <div class="invalid-feedback d-block small">
                                @if (f['email'].errors['required']) {
                                <span>Required</span>
                                }
                                @if (f['email'].errors['email']) {
                                <span>Invalid email format</span>
                                }
                            </div>
                            }
                        </div>

                        <div class="row g-3 mb-3">
                            <div class="col-md-6">
                                <label for="dateOfBirth" class="form-label">Date of Birth</label>
                                <input type="date" id="dateOfBirth" formControlName="dateOfBirth" class="form-control"
                                    [class.is-invalid]="submitted && f['dateOfBirth'].errors" />
                                @if (submitted && f['dateOfBirth'].errors) {
                                <div class="invalid-feedback d-block small">Required</div>
                                }
                            </div>

                            <div class="col-md-6">
                                <label for="enrollmentYear" class="form-label">Enrollment Year</label>
                                <input type="number" id="enrollmentYear" formControlName="enrollmentYear"
                                    class="form-control" [class.is-invalid]="submitted && f['enrollmentYear'].errors"
                                    placeholder="2024" />
                                @if (submitted && f['enrollmentYear'].errors) {
                                <div class="invalid-feedback d-block small">
                                    @if (f['enrollmentYear'].errors['required']) {
                                    <span>Required</span>
                                    }
                                    @if (f['enrollmentYear'].errors['min'] || f['enrollmentYear'].errors['max']) {
                                    <span>Invalid year</span>
                                    }
                                </div>
                                }
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="course" class="form-label">Course</label>
                            <select id="course" formControlName="course" class="form-select"
                                [class.is-invalid]="submitted && f['course'].errors">
                                <option value="">Select course</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="Electrical Engineering">Electrical Engineering</option>
                                <option value="Mechanical Engineering">Mechanical Engineering</option>
                                <option value="Business Administration">Business Administration</option>
                                <option value="Civil Engineering">Civil Engineering</option>
                                <option value="Information Technology">Information Technology</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                            </select>
                            @if (submitted && f['course'].errors) {
                            <div class="invalid-feedback d-block small">Required</div>
                            }
                        </div>

                        <div class="mb-4">
                            <label for="address" class="form-label">Address</label>
                            <textarea id="address" formControlName="address" class="form-control" rows="3"
                                [class.is-invalid]="submitted && f['address'].errors"></textarea>
                            @if (submitted && f['address'].errors) {
                            <div class="invalid-feedback d-block small">
                                @if (f['address'].errors['required']) {
                                Address is required
                                }
                                @if (f['address'].errors['minlength']) {
                                Address must be at least 5 characters
                                }
                            </div>
                            }
                        </div>

                        <div class="mb-4">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" id="phone" formControlName="phone" class="form-control"
                                placeholder="10-digit phone number" [class.is-invalid]="submitted && f['phone'].errors">
                            @if (submitted && f['phone'].errors) {
                            <div class="invalid-feedback d-block small">
                                @if (f['phone'].errors['required']) {
                                Phone number is required
                                }
                                @if (f['phone'].errors['pattern']) {
                                Phone must be exactly 10 digits
                                }
                            </div>
                            }
                        </div>

                        <div class="d-flex gap-2 justify-content-end">
                            <button type="button" class="btn btn-secondary" (click)="onCancel()">
                                Cancel
                            </button>
                            <button type="submit" class="btn btn-primary">
                                {{ isEditMode ? 'Update' : 'Create' }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>