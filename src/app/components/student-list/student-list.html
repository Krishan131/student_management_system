<div class="container py-4">
  <div class="row mb-4 align-items-center">
    <div class="col">
      <h1 class="h4 mb-0 fw-semibold" style="color: var(--premium-dark); letter-spacing: -0.02em;">Students</h1>
    </div>
    <div class="col-auto d-flex gap-2 align-items-center">
      <select class="form-select form-select-sm" [(ngModel)]="selectedCourse" (change)="filterStudents()"
        style="width: 200px;">
        <option value="">All Courses</option>
        @for (course of uniqueCourses; track course) {
        <option [value]="course">{{ course }}</option>
        }
      </select>
      <a routerLink="/dashboard" class="btn btn-secondary text-nowrap">Dashboard</a>
      <a routerLink="/students/new" class="btn btn-primary text-nowrap">Add Student</a>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-6">
      <div class="input-group">
        <span class="input-group-text border-end-0 bg-white">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity: 0.5;">
            <path
              d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z"
              fill="currentColor" />
          </svg>
        </span>
        <input type="text" class="form-control border-start-0 ps-0" [(ngModel)]="searchQuery" (input)="filterStudents()"
          placeholder="Search students..." />
      </div>
    </div>
  </div>

  @if (filteredStudents.length > 0) {
  <div class="card">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Course</th>
            <th>Year</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (student of filteredStudents; track student.id) {
          <tr>
            <td class="text-muted">#{{ student.id }}</td>
            <td class="fw-semibold">{{ student.firstName }} {{ student.lastName }}</td>
            <td class="text-muted">{{ student.email }}</td>
            <td>{{ student.course }}</td>
            <td class="text-muted">{{ student.enrollmentYear }}</td>
            <td class="text-end">
              <div class="btn-group btn-group-sm">
                <a [routerLink]="['/students', student.id]" class="btn btn-info">View</a>
                <a [routerLink]="['/students', student.id, 'edit']" class="btn btn-warning">Edit</a>
                <button (click)="deleteStudent(student.id)" class="btn btn-danger">Delete</button>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  } @else {
  <div class="card text-center py-5">
    <div class="card-body">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" style="opacity: 0.15; margin-bottom: 1rem;">
        <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z"
          fill="currentColor" />
        <path d="M8 12H16V14H8V12ZM8 16H13V18H8V16Z" fill="currentColor" />
      </svg>
      <h3 class="h5 mb-2" style="color: var(--premium-dark);">No Students Found</h3>
      <p class="text-muted small mb-4">
        {{ searchQuery ? 'No students match your search.' : 'Get started by adding your first student.' }}
      </p>
      @if (!searchQuery) {
      <a routerLink="/students/new" class="btn btn-primary btn-sm">Add First Student</a>
      }
    </div>
  </div>
  }
</div>